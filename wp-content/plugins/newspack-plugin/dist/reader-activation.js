(()=>{"use strict";var e,t={5920:(e,t,n)=>{n.d(t,{AU:()=>u,Ic:()=>c,on:()=>s,qY:()=>o});const r="newspack-ras",o={reader:"reader",data:"data",activity:"activity",overlay:"overlay"},i=Object.values(o);function a(e){return i.includes(e)?`${r}-${e}`:""}function c(e,t){if(!(e=a(e)))throw new Error("Invalid event");window.dispatchEvent(new CustomEvent(e,{detail:t}))}function s(e,t){if(!(e=a(e)))throw new Error("Invalid event");window.addEventListener(e,t)}function u(e,t){if(!(e=a(e)))throw new Error("Invalid event");window.removeEventListener(e,t)}},8621:(e,t,n)=>{n.d(t,{M_:()=>d,OO:()=>g});var r=n(4916),o=n(5325),i=n(5920),a=n(2952),c=n(6500),s=n(8905),u=n(3497),l=n(5547);window.newspack_ras_config=window.newspack_ras_config||{};const d=(0,r.A)();function p(e,t,n=0){const r={action:e,data:t,timestamp:n||Date.now()};return d.add("activity",r),(0,i.Ic)(i.qY.activity,r),r}function f(e){const t=d.get("activity")||[];return e?t.filter((t=>t.action===e)):t}function w(e){if(!e)return;const t=g();t.email=e,d.set("reader",t,!1),(0,i.Ic)(i.qY.reader,t)}function h(e=!0){const t=d.get("reader")||{};if(!t.email)throw new Error("Reader email not set");t.authenticated=Boolean(e),d.set("reader",t,!1),(0,i.Ic)(i.qY.reader,t)}function g(){return d.get("reader")||{}}const m=["pwd","link"];function _(){return(0,a.Ri)("np_otp_hash")}const v="newspack_otp_timer";function y(){localStorage.removeItem(v)}const S={store:d,overlays:c.A,on:i.on,off:i.AU,dispatchActivity:p,getActivities:f,getUniqueActivitiesBy:function(e,t){const n=f(e),r=[],o={};for(const e of n){const n="function"==typeof t?t(e):e.data[t];o[n]||(r.push(e),o[n]=!0)}return r},setReaderEmail:w,setAuthenticated:h,refreshAuthentication:function(){const e=(0,a.Ri)("np_auth_reader");e?(w(e),h(!0)):w((0,a.Ri)("np_auth_intention"))},getReader:g,openNewslettersSignupModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,labels:{},content:null,closeOnSuccess:!0,...e},S?._openNewslettersSignupModal?S._openNewslettersSignupModal(e):(console.warn("Newsletters signup modal not available"),e?.onError&&"function"==typeof e.onError&&e.onError())},hasAuthLink:function(){const e=g(),t=(0,a.Ri)("np_otp_hash");return!(!e?.email||!t)},getOTPHash:_,setOTPTimer:function(){localStorage.setItem(v,Math.floor(Date.now()/1e3))},clearOTPTimer:y,getOTPTimeRemaining:function(){const e=localStorage.getItem(v);if(!e)return 0;const t=newspack_ras_config.otp_rate_interval-(Math.floor(Date.now()/1e3)-e);return t||y(),t>0?t:0},authenticateOTP:function(e){return new Promise(((t,n)=>{const r=_(),o=g()?.email;return r?o?e?void fetch("",{method:"POST",headers:{Accept:"application/json"},body:new URLSearchParams({action:newspack_ras_config.otp_auth_action,email:o,hash:r,code:e})}).then((e=>e.json())).then((({success:e,message:r,data:i})=>{const a={...i,email:o,authenticated:!!e,message:r};h(!!e),e?t(a):n(a)})):n({message:"Invalid code"}):n({message:"You must provide an email"}):n({message:"Code has expired",expired:!0})}))},setAuthStrategy:function(e){if(!m.includes(e))throw new Error("Invalid authentication strategy");return(0,a.TV)("np_auth_strategy",e),e},getAuthStrategy:function(){return _()?"otp":(0,a.Ri)("np_auth_strategy")},setPendingCheckout:o._,getPendingCheckout:o.m,debugLog:a.cY,...newspack_ras_config.is_ras_enabled&&{openAuthModal:function(e={}){e={onSuccess:null,onDismiss:null,onError:null,initialState:null,skipSuccess:!1,skipNewslettersSignup:!1,labels:{signin:{title:null},register:{title:null}},content:null,trigger:null,closeOnSuccess:!0,...e},newspack_ras_config.is_logged_in?e.onSuccess&&"function"==typeof e.onSuccess&&e.onSuccess():S._openAuthModal?S._openAuthModal(e):(console.warn("Authentication modal not available"),e.onError&&"function"==typeof e.onError&&e.onError())}}};function b(...e){e.forEach((e=>{Array.isArray(e)&&"string"==typeof e[0]?p(...e):"function"==typeof e?e(S):console.warn("Invalid newspackRAS.push argument",e)}))}window.newspackRASInitialized||function(){const e=newspack_ras_config,t=e?.authenticated_email||(0,a.Ri)("np_auth_intention"),n=!!e?.authenticated_email,r=g(),o={email:t||r?.email,authenticated:n};r?.email===o?.email&&r?.authenticated===o?.authenticated||d.set("reader",o,!1),(0,i.Ic)(i.qY.reader,o),(0,s.Ay)(S),(0,l.A)(S),function(){const e=newspack_ras_config.cid_cookie;(0,a.Ri)(e)||(0,a.TV)(e,(0,a.ni)(12))}(),(0,u.A)(S),function(){if((0,a.Ri)("np_auth_reader"))return;const e=setInterval((()=>{const t=g(),n=(0,a.Ri)("np_auth_intention");if(n&&t.email!==n)w(n);else{const t=(0,a.Ri)("np_auth_reader");t&&(w(t),h(!0),clearInterval(e))}}),1e3)}(),function(){const e=(e,t="submit")=>{const n="FORM"===e.tagName?e:e.querySelector("form");n&&n.addEventListener(t,(()=>{d.set("is_newsletter_subscriber",!0)}))};document.querySelectorAll([".mc4wp-form"].join(",")).forEach((t=>e(t))),document.querySelectorAll([".newspack-newsletters-subscribe",".newspack-subscribe-form"].join(",")).forEach((t=>e(t,"newspack-newsletters-subscribe-success")))}(),(newspack_reader_data?.reader_activity||[]).forEach((({action:e,data:t})=>p(e,t))),function(){const e=document.referrer?new URL(document.referrer).hostname:"";e&&e!==window.location.hostname&&d.set("referrer",e.replace("www.","").trim().toLowerCase())}(),window.newspackReaderActivation=S,window.newspackRAS=window.newspackRAS||[],window.newspackRAS.forEach((e=>b(e))),window.newspackRAS.push=b,window.newspackRASInitialized=!0}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],c=!0,s=0;s<n.length;s++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(c=!1,i<a&&(a=i));if(c){e.splice(l--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=619,(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={619:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,c,s]=n,u=0;if(a.some((t=>0!==e[t]))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var l=s(r)}for(t&&t(n);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=globalThis.webpackChunknewspack=globalThis.webpackChunknewspack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[223],(()=>r(8621)));o=r.O(o)})();